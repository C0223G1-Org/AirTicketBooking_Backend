<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger" tests="1" skipped="0" failures="0" errors="0" timestamp="2023-08-14T07:06:44" hostname="DESKTOP-I6017GJ" time="0.668">
  <properties/>
  <testcase name="findTicketByNameAndIdCardPassenger_Page()" classname="com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger" time="0.668"/>
  <system-out><![CDATA[14:06:34.853 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]
14:06:34.867 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]
14:06:34.910 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger] from class [org.springframework.boot.test.context.SpringBootTestContextBootstrapper]
14:06:34.924 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger], using SpringBootContextLoader
14:06:34.930 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger]: class path resource [com/example/air_ticket_booking/controller/controller/AirTicketBookingController_findTicketByNameAndIdCardPassenger-context.xml] does not exist
14:06:34.932 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger]: class path resource [com/example/air_ticket_booking/controller/controller/AirTicketBookingController_findTicketByNameAndIdCardPassengerContext.groovy] does not exist
14:06:34.934 [Test worker] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger]: no resource found for suffixes {-context.xml, Context.groovy}.
14:06:34.936 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger]: AirTicketBookingController_findTicketByNameAndIdCardPassenger does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
14:06:35.019 [Test worker] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger]
14:06:35.096 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [D:\Codegym\air_ticket_booking\AirTicketBooking_Backend\air_ticket_booking\build\classes\java\main\com\example\air_ticket_booking\AirTicketBookingApplication.class]
14:06:35.098 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.example.air_ticket_booking.AirTicketBookingApplication for test class com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger
14:06:35.222 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - @TestExecutionListeners is not present for class [com.example.air_ticket_booking.controller.controller.AirTicketBookingController_findTicketByNameAndIdCardPassenger]: using defaults.
14:06:35.223 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
14:06:35.247 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@71e5f61d, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2ce86164, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5e8f9e2d, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@51df223b, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@fd46303, org.springframework.test.context.support.DirtiesContextTestExecutionListener@60d8c0dc, org.springframework.test.context.transaction.TransactionalTestExecutionListener@4204541c, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6a62689d, org.springframework.test.context.event.EventPublishingTestExecutionListener@4602c2a9, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@60fa3495, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3e2822, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@79e18e38, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@29a60c27, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@1849db1a, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@69c79f09]
14:06:35.251 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@464649c testClass = AirTicketBookingController_findTicketByNameAndIdCardPassenger, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7c22d4f testClass = AirTicketBookingController_findTicketByNameAndIdCardPassenger, locations = '{}', classes = '{class com.example.air_ticket_booking.AirTicketBookingApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@6e950bcf, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@22d7b4f8, [ImportsContextCustomizer@5f59185e key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6127a7e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@79d94571, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1c32386d, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@15aab8c6], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true]], class annotated with @DirtiesContext [false] with mode [null].

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v2.7.14)

2023-08-14 14:06:35.707  INFO 1248 --- [    Test worker] oller_findTicketByNameAndIdCardPassenger : Starting AirTicketBookingController_findTicketByNameAndIdCardPassenger using Java 13.0.14 on DESKTOP-I6017GJ with PID 1248 (started by ADMIN in D:\Codegym\air_ticket_booking\AirTicketBooking_Backend\air_ticket_booking)
2023-08-14 14:06:35.711  INFO 1248 --- [    Test worker] oller_findTicketByNameAndIdCardPassenger : No active profile set, falling back to 1 default profile: "default"
2023-08-14 14:06:37.153  INFO 1248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-08-14 14:06:37.336  INFO 1248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 157 ms. Found 14 JPA repository interfaces.
2023-08-14 14:06:37.921  INFO 1248 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$EnhancerBySpringCGLIB$$887db524] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-08-14 14:06:38.025  INFO 1248 --- [    Test worker] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2023-08-14 14:06:38.452  INFO 1248 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-08-14 14:06:38.571  INFO 1248 --- [    Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.15.Final
2023-08-14 14:06:38.878  INFO 1248 --- [    Test worker] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-08-14 14:06:39.060  INFO 1248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-08-14 14:06:39.066  WARN 1248 --- [    Test worker] com.zaxxer.hikari.util.DriverDataSource  : Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2023-08-14 14:06:39.602  INFO 1248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-08-14 14:06:39.634  INFO 1248 --- [    Test worker] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
Hibernate: alter table account add constraint FK9pbnm9levk9yjtdx8ihxja8ei foreign key (role_id_role) references role (id_role)
Hibernate: alter table customer add constraint FKsvltrp0v6swwnwwjittqcoxh8 foreign key (account_id_account) references account (id_account)
Hibernate: alter table employee add constraint FKdj1dw61h7w0s2t29f9cank7xi foreign key (account_id_account) references account (id_account)
Hibernate: alter table post add constraint FK18s6ve2mw2p0w3kth5wt2n4hj foreign key (employee_id) references employee (id_employee)
Hibernate: alter table route add constraint FKfaw6n25ueugnmnxs59ok672iy foreign key (id_air_craft) references air_craft (id_air_craft)
Hibernate: alter table route add constraint FKhgycblcw4ojds47bsclvr9ljb foreign key (id_departure) references departure (id_departure)
Hibernate: alter table route add constraint FKbe0l5h5smvbpsojja1fxkquda foreign key (id_destination) references destination (id_destination)
Hibernate: alter table seat add constraint FKk135xd0jppmv62kdyhrrcid8c foreign key (id_route) references route (id_route)
Hibernate: alter table seat add constraint FK28kyfo0ys52noa3gtkolnb7jd foreign key (id_type_seat) references type_seat (id_type_seat)
Hibernate: alter table ticket add constraint FK7wn2vjkvy4gh7wl7041uury09 foreign key (customer_id_customer) references customer (id_customer)
Hibernate: alter table ticket add constraint FKm24drthm088e9cy4g28xdtupp foreign key (luggage_id_luggage) references luggage (id_luggage)
Hibernate: alter table ticket add constraint FK3nwpv090qmb2m985ya575q8ys foreign key (seat_id_seat) references seat (id_seat)
Hibernate: alter table ticket add constraint FKhiku6sb9mklri5018qrs3y2v8 foreign key (type_passenger_id_type_passenger) references type_passenger (id_type_passenger)
Hibernate: alter table ticket add constraint FKsn2xg2u42vebggjqk0cdlr4ph foreign key (type_ticket_id_type_ticket) references type_ticket (id_type_ticket)
2023-08-14 14:06:41.615  INFO 1248 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-08-14 14:06:41.633  INFO 1248 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-08-14 14:06:43.385  WARN 1248 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-08-14 14:06:44.620  INFO 1248 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2023-08-14 14:06:44.621  INFO 1248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2023-08-14 14:06:44.632  INFO 1248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 4 ms
2023-08-14 14:06:44.671  INFO 1248 --- [    Test worker] oller_findTicketByNameAndIdCardPassenger : Started AirTicketBookingController_findTicketByNameAndIdCardPassenger in 9.381 seconds (JVM running for 11.64)
10
Hibernate: select t.id_ticket as id,t.tel_passenger as telPassenger,t.price_ticket as priceTicket,t.name_passenger as namePassenger,t.id_card_passenger as idCardPassenger,t.date_booking as dateBooking,tp.name_type_passenger as nameTypePassenger,l.name_luggage as nameLuggage,tt.name_type_ticket as nameTypeTicket,s.position_seat as positionSeat,ts.name_type_seat as nameTypeSeat,r.name_route as nameRoute,r.time_arrival as timeArrival,r.time_departure as timeDeparture,r.date_arrival as dateArrival,r.date_departure as dateDeparture,d.name_destination as nameDestination,dt.name_departure as nameDeparture,ac.name_air_craft as nameAirCraft from ticket t 
    join type_ticket tt on tt.id_type_ticket = t.type_ticket_id_type_ticket 
    join luggage l on l.id_luggage = t.luggage_id_luggage
    join type_passenger tp on t.type_passenger_id_type_passenger = tp.id_type_passenger 
    join seat s on t.seat_id_seat = s.id_seat 
    join type_seat ts on s.id_type_seat = ts.id_type_seat 
    join route r on s.id_route = r.id_route 
    join air_craft ac on ac.id_air_craft = r.id_air_craft 
    join destination d on d.id_destination = r.id_destination 
    join departure dt on dt.id_departure = r.id_departure 
    where t.name_passenger like concat('%', ?, '%') and t.id_card_passenger = ? limit ?

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /tickets/search-ticket/Nh%C3%A0n/201923248
       Parameters = {page=[0]}
          Headers = []
             Body = null
    Session Attrs = {}

Handler:
             Type = com.example.air_ticket_booking.controller.ticket.TicketController
           Method = com.example.air_ticket_booking.controller.ticket.TicketController#findTicketByNameAndIdCardPassenger(Pageable, String, String)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json"]
     Content type = application/json
             Body = {"content":[{"id":3,"positionSeat":"A-01","nameLuggage":"Hành lý ph? thông","idCardPassenger":"201923248","namePassenger":"Nguy?n Anh Nhàn","priceTicket":"1600000","telPassenger":"0965702079","dateBooking":"2023-03-29","nameAirCraft":"Airbus A320neo","nameDeparture":"H?i Phong","nameDestination":"Hà N?i","dateArrival":"2023-04-25","dateDeparture":"2023-04-25","nameRoute":"AL-0001","timeArrival":"09:30:15","timeDeparture":"08:30:15","nameTypeSeat":"H?ng Th??ng Gia","nameTypeTicket":"M?t chi?u","nameTypePassenger":"Khách ph? thông"},{"id":1,"positionSeat":"A-02","nameLuggage":"Hành lý ??t bi?t","idCardPassenger":"201923248","namePassenger":"Nguy?n Anh Nhàn","priceTicket":"999999","telPassenger":"0393554072","dateBooking":"2023-03-29","nameAirCraft":"Airbus A320neo","nameDeparture":"H?i Phong","nameDestination":"Hà N?i","dateArrival":"2023-04-25","dateDeparture":"2023-04-25","nameRoute":"AL-0001","timeArrival":"09:30:15","timeDeparture":"08:30:15","nameTypeSeat":"H?ng Th??ng Gia","nameTypeTicket":"Kh? h?i","nameTypePassenger":"Kinh doanh"}],"pageable":{"sort":{"empty":true,"sorted":false,"unsorted":true},"offset":0,"pageSize":10,"pageNumber":0,"paged":true,"unpaged":false},"last":true,"totalElements":2,"totalPages":1,"size":10,"number":0,"sort":{"empty":true,"sorted":false,"unsorted":true},"first":true,"numberOfElements":2,"empty":false}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
]]></system-out>
  <system-err><![CDATA[Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
]]></system-err>
</testsuite>
